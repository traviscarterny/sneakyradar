<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SneakyRadar â€” Drop Radar, Release Calendar, Resell Tracker, Auth Guide</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --bg: #0a0a0a; --surface: #111; --border: #222;
      --accent: #ff3c00; --accent2: #ffd200; --text: #f0f0f0; --muted: #555; --card: #141414;
      --green: #00e676; --purple: #cc44ff;
    }
    body { background: var(--bg); color: var(--text); font-family: 'DM Mono', monospace; min-height: 100vh; overflow-x: hidden; }
    .grain { position: fixed; inset: 0; pointer-events: none; z-index: 100; opacity: 0.04;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E"); }
    @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.4; transform: scale(0.8); } }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes shimmer { 0%, 100% { opacity: 0.4; } 50% { opacity: 0.9; } }
    @keyframes dropDown { from { opacity: 0; transform: translateY(-6px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes typingBounce { 0%, 100% { transform: translateY(0); opacity: 0.4; } 50% { transform: translateY(-5px); opacity: 1; } }
    .page { animation: fadeIn 0.2s ease; }
    .nav { border-bottom: 1px solid var(--border); padding: 0 40px; display: flex; align-items: stretch; justify-content: space-between; position: sticky; top: 0; z-index: 50; background: rgba(10,10,10,0.97); backdrop-filter: blur(12px); height: 60px; }
    .nav-left { display: flex; align-items: center; }
    .nav-logo { font-family: 'Bebas Neue', sans-serif; font-size: 1.6rem; letter-spacing: 4px; padding-right: 32px; border-right: 1px solid var(--border); display: flex; align-items: center; }
    .nav-logo .sneaky { color: var(--text); }
    .nav-logo .radar { color: var(--accent); }
    .nav-tabs { display: flex; align-items: stretch; }
    .nav-tab { display: flex; align-items: center; gap: 7px; padding: 0 22px; font-size: 0.65rem; letter-spacing: 2px; text-transform: uppercase; cursor: pointer; color: var(--muted); transition: all 0.15s; border-right: 1px solid var(--border); border-bottom: 2px solid transparent; background: transparent; border-top: none; border-left: none; font-family: 'DM Mono', monospace; }
    .nav-tab:hover { color: var(--text); background: #111; }
    .nav-tab.active { color: var(--text); border-bottom-color: var(--accent); background: #0e0e0e; }
    .nav-right { display: flex; align-items: center; gap: 12px; }
    .alert-btn { background: transparent; border: 1px solid var(--accent); color: var(--accent); font-family: 'DM Mono', monospace; font-size: 0.6rem; letter-spacing: 2px; text-transform: uppercase; padding: 7px 16px; cursor: pointer; transition: all 0.15s; display: flex; align-items: center; gap: 7px; }
    .alert-btn:hover { background: var(--accent); color: white; }
    .alert-dot { width: 6px; height: 6px; background: var(--accent); border-radius: 50%; animation: pulse 1.5s infinite; }
    .section-wrap { max-width: 1200px; margin: 0 auto; padding: 60px 40px 100px; }
    .section-eyebrow { font-size: 0.6rem; letter-spacing: 4px; text-transform: uppercase; color: var(--accent); margin-bottom: 10px; }
    .section-title { font-family: 'Bebas Neue', sans-serif; font-size: clamp(3rem, 7vw, 6rem); line-height: 0.9; letter-spacing: 2px; margin-bottom: 6px; }
    .section-title .outline { -webkit-text-stroke: 1px var(--text); color: transparent; }
    .section-title .filled { color: var(--accent); }
    .section-sub { font-size: 0.75rem; color: var(--muted); letter-spacing: 0.5px; line-height: 1.7; margin-bottom: 40px; max-width: 520px; }
    .search-row { display: flex; max-width: 900px; margin: 0 0 24px; }
    .search-bar { flex: 1; display: flex; border: 1px solid var(--border); background: var(--surface); border-right: none; }
    .search-bar input { flex: 1; background: transparent; border: none; color: var(--text); font-family: 'DM Mono', monospace; font-size: 0.85rem; padding: 16px 20px; outline: none; letter-spacing: 1px; }
    .search-bar input::placeholder { color: var(--muted); }
    .src-dropdown-wrap { position: relative; }
    .src-dropdown-btn { height: 100%; background: #1a1a1a; border: 1px solid var(--border); border-right: none; color: var(--text); font-family: 'DM Mono', monospace; font-size: 0.7rem; letter-spacing: 2px; padding: 0 20px; cursor: pointer; white-space: nowrap; display: flex; align-items: center; gap: 8px; transition: background 0.15s; text-transform: uppercase; min-width: 160px; justify-content: space-between; }
    .src-dropdown-btn:hover { background: #222; }
    .chevron { transition: transform 0.2s; font-size: 0.6rem; }
    .chevron.open { transform: rotate(180deg); }
    .count-badge { background: var(--accent); color: white; font-size: 0.55rem; padding: 1px 5px; min-width: 18px; text-align: center; }
    .src-dropdown-menu { position: absolute; top: calc(100% + 1px); left: 0; right: 0; min-width: 240px; background: #111; border: 1px solid var(--border); z-index: 200; animation: dropDown 0.15s ease; max-height: 420px; overflow-y: auto; scrollbar-width: thin; }
    .src-menu-header { padding: 10px 14px; font-size: 0.55rem; letter-spacing: 3px; text-transform: uppercase; color: var(--muted); border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
    .src-menu-header button { background: none; border: none; color: var(--accent); cursor: pointer; font-family: 'DM Mono', monospace; font-size: 0.55rem; letter-spacing: 2px; text-transform: uppercase; }
    .src-menu-item { display: flex; align-items: center; gap: 10px; padding: 10px 14px; cursor: pointer; transition: background 0.1s; border-bottom: 1px solid #1a1a1a; font-size: 0.7rem; letter-spacing: 1px; }
    .src-menu-item:hover { background: #1a1a1a; }
    .src-checkbox { width: 14px; height: 14px; border: 1px solid var(--border); flex-shrink: 0; display: flex; align-items: center; justify-content: center; transition: all 0.15s; }
    .src-checkbox.checked { border-color: var(--accent2); background: var(--accent2); }
    .src-checkbox.checked::after { content: 'âœ“'; color: #000; font-size: 0.6rem; font-weight: bold; }
    .src-color-dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }
    .src-label { color: var(--text); flex: 1; }
    .src-url { font-size: 0.55rem; color: var(--muted); }
    .search-go-btn { background: var(--accent); color: white; border: none; font-family: 'Bebas Neue', sans-serif; font-size: 1.1rem; letter-spacing: 3px; padding: 0 32px; cursor: pointer; transition: background 0.15s; }
    .search-go-btn:hover { background: #ff5a20; }
    .search-go-btn:disabled { background: var(--muted); cursor: not-allowed; }
    .filters { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 24px; }
    .filter-btn { background: transparent; border: 1px solid var(--border); color: var(--muted); font-family: 'DM Mono', monospace; font-size: 0.65rem; letter-spacing: 2px; text-transform: uppercase; padding: 6px 16px; cursor: pointer; transition: all 0.15s; }
    .filter-btn:hover, .filter-btn.active { border-color: var(--accent); color: var(--accent); }
    .result-source-filters { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 32px; }
    .rsf-btn { background: transparent; border: 1px solid var(--border); color: var(--muted); font-family: 'DM Mono', monospace; font-size: 0.6rem; letter-spacing: 1px; text-transform: uppercase; padding: 5px 12px; cursor: pointer; transition: all 0.15s; display: flex; align-items: center; gap: 6px; }
    .rsf-btn .dot { width: 6px; height: 6px; border-radius: 50%; }
    .rsf-btn:hover, .rsf-btn.active { border-color: var(--accent2); color: var(--accent2); }
    .progress-steps { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 6px; margin-bottom: 24px; }
    .progress-step { display: flex; align-items: center; gap: 8px; font-size: 0.6rem; letter-spacing: 1px; text-transform: uppercase; }
    .step-dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }
    .step-dot.done { background: var(--accent2); } .step-dot.active { background: var(--accent); animation: pulse 1s infinite; } .step-dot.pending { background: var(--border); }
    .step-label.done { color: var(--accent2); } .step-label.active { color: var(--text); } .step-label.pending { color: var(--muted); }
    .status-bar { display: flex; align-items: center; gap: 12px; margin-bottom: 32px; font-size: 0.7rem; letter-spacing: 2px; text-transform: uppercase; color: var(--muted); }
    .pulse-dot { width: 8px; height: 8px; background: var(--accent); border-radius: 50%; animation: pulse 1.5s ease-in-out infinite; }
    .error-msg { margin: 0 0 24px; padding: 16px 20px; border: 1px solid var(--accent); color: var(--accent); font-size: 0.75rem; letter-spacing: 1px; line-height: 1.6; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 1px; background: var(--border); border: 1px solid var(--border); }
    .card { background: var(--card); transition: background 0.2s; position: relative; overflow: hidden; display: flex; flex-direction: column; }
    .card::before { content: ''; position: absolute; top: 0; left: 0; width: 3px; height: 0; background: var(--accent); transition: height 0.3s; z-index: 2; }
    .card:hover { background: #1a1a1a; }
    .card:hover::before { height: 100%; }
    .card.sponsored { outline: 1px solid var(--accent2); }
    .card.sponsored::before { background: var(--accent2); }
    .sponsor-banner { background: var(--accent2); color: #000; font-size: 0.5rem; letter-spacing: 3px; text-transform: uppercase; padding: 4px 14px; display: flex; justify-content: space-between; }
    .card-img-wrap { width: 100%; height: 200px; background: #191919; overflow: hidden; display: flex; align-items: center; justify-content: center; border-bottom: 1px solid var(--border); position: relative; cursor: pointer; }
    .card-img { width: 100%; height: 100%; object-fit: contain; padding: 20px; transition: transform 0.35s ease; }
    .card:hover .card-img { transform: scale(1.06); }
    .card-img-placeholder { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-family: 'Bebas Neue', sans-serif; font-size: 5rem; color: #2a2a2a; }
    .card-source-tag { position: absolute; bottom: 8px; right: 8px; font-size: 0.5rem; letter-spacing: 2px; text-transform: uppercase; padding: 2px 7px; background: rgba(0,0,0,0.8); border: 1px solid var(--border); color: var(--muted); }
    .card-body { padding: 20px; flex: 1; display: flex; flex-direction: column; }
    .card-brand { font-size: 0.6rem; letter-spacing: 4px; text-transform: uppercase; color: var(--accent); margin-bottom: 6px; }
    .card-name { font-family: 'Bebas Neue', sans-serif; font-size: 1.4rem; letter-spacing: 2px; line-height: 1.1; margin-bottom: 6px; cursor: pointer; }
    .card-name:hover { color: var(--accent2); }
    .card-colorway { font-size: 0.65rem; color: var(--muted); letter-spacing: 1px; margin-bottom: 12px; }
    .card-meta { display: flex; flex-direction: column; gap: 6px; }
    .meta-row { display: flex; justify-content: space-between; align-items: center; font-size: 0.7rem; letter-spacing: 1px; }
    .meta-label { color: var(--muted); text-transform: uppercase; }
    .meta-value { color: var(--text); }
    .price { color: var(--accent2); font-size: 0.85rem; }
    .hype-bar { margin-top: 12px; height: 2px; background: var(--border); overflow: hidden; }
    .hype-fill { height: 100%; background: linear-gradient(90deg, var(--accent), var(--accent2)); }
    .hype-label { font-size: 0.6rem; letter-spacing: 2px; text-transform: uppercase; color: var(--muted); margin-top: 5px; display: flex; justify-content: space-between; }
    .badge { display: inline-block; font-size: 0.55rem; letter-spacing: 2px; text-transform: uppercase; padding: 3px 8px; border: 1px solid; margin-bottom: 8px; }
    .badge-hot { border-color: var(--accent); color: var(--accent); }
    .badge-upcoming { border-color: var(--accent2); color: var(--accent2); }
    .badge-limited { border-color: #a0f; color: #a0f; }
    .price-compare { margin-top: 12px; border-top: 1px solid var(--border); padding-top: 10px; }
    .price-compare-label { font-size: 0.55rem; letter-spacing: 3px; text-transform: uppercase; color: var(--muted); margin-bottom: 7px; }
    .price-compare-rows { display: flex; flex-direction: column; gap: 5px; }
    .price-row { display: flex; align-items: center; gap: 8px; }
    .price-row-store { font-size: 0.6rem; letter-spacing: 1px; color: var(--muted); flex: 1; text-transform: uppercase; }
    .price-row-amount { font-size: 0.75rem; color: var(--accent2); min-width: 48px; text-align: right; }
    .price-row-btn { font-family: 'DM Mono', monospace; font-size: 0.55rem; letter-spacing: 1px; text-transform: uppercase; background: transparent; border: 1px solid var(--border); color: var(--muted); padding: 3px 9px; cursor: pointer; transition: all 0.15s; white-space: nowrap; text-decoration: none; display: inline-block; }
    .price-row-btn:hover { border-color: var(--accent2); color: var(--accent2); }
    .price-row-btn.best { border-color: var(--accent2); color: #000; background: var(--accent2); }
    .loading-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 1px; background: var(--border); border: 1px solid var(--border); }
    .loading-card { background: var(--card); animation: shimmer 1.5s ease-in-out infinite; }
    .loading-img { width: 100%; height: 200px; background: #1a1a1a; border-bottom: 1px solid var(--border); }
    .loading-body { padding: 20px; }
    .skeleton { background: var(--border); margin-bottom: 12px; }
    .empty-state { text-align: center; padding: 80px 40px; color: var(--muted); font-size: 0.75rem; letter-spacing: 2px; text-transform: uppercase; border: 1px solid var(--border); }
    .empty-state h2 { font-family: 'Bebas Neue', sans-serif; font-size: 3rem; color: var(--border); letter-spacing: 4px; margin-bottom: 16px; }
    .resell-table { width: 100%; border: 1px solid var(--border); border-collapse: collapse; }
    .resell-table th { background: #111; padding: 12px 16px; font-size: 0.6rem; letter-spacing: 3px; text-transform: uppercase; color: var(--muted); text-align: left; border-bottom: 1px solid var(--border); font-weight: 400; cursor: pointer; }
    .resell-table td { padding: 14px 16px; font-size: 0.72rem; letter-spacing: 0.5px; border-bottom: 1px solid #1a1a1a; vertical-align: middle; }
    .resell-table tr:hover td { background: #161616; }
    .resell-brand { font-size: 0.55rem; letter-spacing: 3px; text-transform: uppercase; color: var(--accent); }
    .resell-name { font-family: 'Bebas Neue', sans-serif; font-size: 1.1rem; letter-spacing: 1px; }
    .resell-price-avg { color: var(--accent2); font-size: 0.85rem; }
    .resell-price-low { color: var(--muted); font-size: 0.7rem; }
    .resell-price-high { color: var(--text); font-size: 0.7rem; }
    .trend-up { color: var(--green); font-size: 0.7rem; }
    .trend-down { color: var(--accent); font-size: 0.7rem; }
    .hot-tag { background: var(--accent); color: white; font-size: 0.5rem; letter-spacing: 2px; text-transform: uppercase; padding: 2px 7px; }
    .vol-tag { font-size: 0.6rem; color: var(--muted); }
    .resell-buy-btn { font-family: 'DM Mono', monospace; font-size: 0.55rem; letter-spacing: 1px; text-transform: uppercase; background: transparent; border: 1px solid var(--border); color: var(--muted); padding: 5px 12px; cursor: pointer; transition: all 0.15s; text-decoration: none; display: inline-block; white-space: nowrap; }
    .resell-buy-btn:hover { border-color: var(--accent2); color: var(--accent2); }
    .resell-stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1px; background: var(--border); border: 1px solid var(--border); margin-bottom: 32px; }
    .resell-stat { background: var(--card); padding: 24px; }
    .resell-stat-label { font-size: 0.55rem; letter-spacing: 3px; text-transform: uppercase; color: var(--muted); margin-bottom: 8px; }
    .resell-stat-value { font-family: 'Bebas Neue', sans-serif; font-size: 2rem; letter-spacing: 2px; color: var(--accent2); }
    .resell-stat-sub { font-size: 0.6rem; color: var(--muted); margin-top: 4px; }
    .auth-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1px; background: var(--border); border: 1px solid var(--border); margin-bottom: 48px; }
    .auth-card { background: var(--card); padding: 24px; cursor: pointer; transition: background 0.15s; position: relative; overflow: hidden; }
    .auth-card:hover { background: #1a1a1a; }
    .auth-card.selected { background: #1a1a1a; outline: 1px solid var(--accent); }
    .auth-model { font-family: 'Bebas Neue', sans-serif; font-size: 1.4rem; letter-spacing: 2px; margin-bottom: 6px; }
    .auth-diff { font-size: 0.6rem; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 12px; }
    .auth-diff.easy { color: var(--green); } .auth-diff.medium { color: var(--accent2); } .auth-diff.hard { color: var(--accent); } .auth-diff.veryhard { color: var(--purple); }
    .fake-score-label { font-size: 0.55rem; letter-spacing: 2px; text-transform: uppercase; color: var(--muted); margin-bottom: 5px; display: flex; justify-content: space-between; }
    .fake-score-bar { height: 3px; background: var(--border); overflow: hidden; }
    .fake-score-fill { height: 100%; background: linear-gradient(90deg, var(--green), var(--accent2), var(--accent)); }
    .auth-cta { font-size: 0.6rem; letter-spacing: 1px; text-transform: uppercase; color: var(--accent); margin-top: 12px; }
    .auth-detail { border: 1px solid var(--border); animation: fadeIn 0.2s ease; }
    .auth-detail-header { background: #111; padding: 20px 28px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; }
    .auth-detail-title { font-family: 'Bebas Neue', sans-serif; font-size: 1.8rem; letter-spacing: 3px; }
    .auth-detail-close { background: transparent; border: none; color: var(--muted); cursor: pointer; font-size: 1rem; font-family: 'DM Mono', monospace; letter-spacing: 1px; }
    .auth-detail-close:hover { color: var(--text); }
    .auth-check { padding: 20px 28px; border-bottom: 1px solid #1a1a1a; display: grid; grid-template-columns: 160px 1fr 1fr 1fr; gap: 20px; align-items: start; }
    .auth-check:last-child { border-bottom: none; }
    .auth-check-area { font-family: 'Bebas Neue', sans-serif; font-size: 1rem; letter-spacing: 1px; padding-top: 2px; }
    .auth-check-real { font-size: 0.68rem; color: var(--green); line-height: 1.5; }
    .auth-check-fake { font-size: 0.68rem; color: var(--accent); line-height: 1.5; }
    .auth-check-tip { font-size: 0.68rem; color: var(--accent2); line-height: 1.5; }
    .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 300; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(4px); animation: fadeIn 0.2s; }
    .modal { background: #0e0e0e; border: 1px solid var(--border); width: 480px; max-width: 95vw; animation: fadeIn 0.25s ease; }
    .modal-header { padding: 24px 28px 0; display: flex; align-items: flex-start; justify-content: space-between; }
    .modal-title { font-family: 'Bebas Neue', sans-serif; font-size: 2rem; letter-spacing: 3px; }
    .modal-title span { color: var(--accent); }
    .modal-close { background: transparent; border: none; color: var(--muted); cursor: pointer; font-size: 1.2rem; line-height: 1; }
    .modal-body { padding: 16px 28px 28px; }
    .modal-desc { font-size: 0.75rem; color: var(--muted); line-height: 1.7; margin-bottom: 20px; }
    .modal-features { display: flex; flex-direction: column; gap: 8px; margin-bottom: 24px; }
    .modal-feature { display: flex; align-items: center; gap: 10px; font-size: 0.7rem; color: var(--text); }
    .modal-feature-dot { width: 5px; height: 5px; background: var(--accent2); border-radius: 50%; flex-shrink: 0; }
    .modal-form { display: flex; }
    .modal-input { flex: 1; background: var(--surface); border: 1px solid var(--border); border-right: none; color: var(--text); font-family: 'DM Mono', monospace; font-size: 0.8rem; padding: 13px 16px; outline: none; }
    .modal-input:focus { border-color: var(--accent); }
    .modal-input::placeholder { color: var(--muted); }
    .modal-submit { background: var(--accent); color: white; border: none; font-family: 'Bebas Neue', sans-serif; font-size: 1rem; letter-spacing: 3px; padding: 13px 24px; cursor: pointer; }
    .modal-submit:hover { background: #ff5a20; }
    .modal-success { text-align: center; padding: 40px 28px; }
    .modal-fine { font-size: 0.55rem; color: var(--muted); margin-top: 12px; line-height: 1.5; opacity: 0.7; }
    .chat-fab { position: fixed; bottom: 32px; right: 32px; z-index: 200; width: 60px; height: 60px; background: var(--accent); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 0 1px #ff3c0044, 0 8px 32px rgba(255,60,0,0.4); transition: transform 0.2s; font-family: 'Bebas Neue', sans-serif; font-size: 0.65rem; letter-spacing: 2px; color: white; flex-direction: column; gap: 2px; }
    .chat-fab:hover { transform: scale(1.06); }
    .chat-fab svg { width: 22px; height: 22px; }
    .chat-window { position: fixed; bottom: 108px; right: 32px; z-index: 200; width: 400px; max-height: 600px; background: #0e0e0e; border: 1px solid var(--border); display: flex; flex-direction: column; box-shadow: 0 24px 80px rgba(0,0,0,0.8); animation: fadeIn 0.25s ease; }
    .chat-header { padding: 16px 20px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; background: #111; }
    .chat-header-left { display: flex; align-items: center; gap: 12px; }
    .chat-avatar { width: 36px; height: 36px; background: var(--accent); display: flex; align-items: center; justify-content: center; font-family: 'Bebas Neue', sans-serif; font-size: 1rem; color: white; flex-shrink: 0; }
    .chat-title { font-family: 'Bebas Neue', sans-serif; font-size: 1rem; letter-spacing: 3px; }
    .chat-subtitle { font-size: 0.55rem; letter-spacing: 2px; text-transform: uppercase; color: var(--muted); margin-top: 1px; display: flex; align-items: center; gap: 5px; }
    .chat-online { width: 7px; height: 7px; background: #00e676; border-radius: 50%; animation: pulse 2s infinite; }
    .chat-close { background: transparent; border: none; color: var(--muted); cursor: pointer; font-size: 1.2rem; padding: 4px; line-height: 1; }
    .chat-messages { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 16px; scrollbar-width: thin; }
    .msg { display: flex; gap: 10px; animation: fadeIn 0.2s ease; }
    .msg.user { flex-direction: row-reverse; }
    .msg-avatar { width: 28px; height: 28px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-family: 'Bebas Neue', sans-serif; font-size: 0.75rem; }
    .msg-avatar.bot { background: var(--accent); color: white; }
    .msg-avatar.user { background: var(--border); color: var(--muted); }
    .msg-bubble { max-width: calc(100% - 44px); padding: 10px 14px; font-size: 0.75rem; line-height: 1.6; border: 1px solid var(--border); }
    .msg.bot .msg-bubble { background: #161616; }
    .msg.user .msg-bubble { background: #1a0a00; border-color: #ff3c0044; }
    .msg-bubble strong { color: var(--accent2); font-weight: 500; }
    .msg-bubble em { color: var(--accent); font-style: normal; }
    .typing-indicator { display: flex; gap: 4px; align-items: center; padding: 4px 0; }
    .typing-dot { width: 6px; height: 6px; background: var(--muted); border-radius: 50%; animation: typingBounce 1.2s ease-in-out infinite; }
    .typing-dot:nth-child(2) { animation-delay: 0.2s; }
    .typing-dot:nth-child(3) { animation-delay: 0.4s; }
    .chat-suggestions { padding: 0 16px 12px; display: flex; flex-wrap: wrap; gap: 6px; }
    .suggestion-chip { background: transparent; border: 1px solid var(--border); color: var(--muted); font-family: 'DM Mono', monospace; font-size: 0.6rem; letter-spacing: 1px; padding: 5px 10px; cursor: pointer; transition: all 0.15s; }
    .suggestion-chip:hover { border-color: var(--accent); color: var(--accent); }
    .chat-input-row { padding: 12px 16px; border-top: 1px solid var(--border); display: flex; background: #111; }
    .chat-input { flex: 1; background: transparent; border: 1px solid var(--border); border-right: none; color: var(--text); font-family: 'DM Mono', monospace; font-size: 0.75rem; padding: 10px 14px; outline: none; resize: none; max-height: 80px; line-height: 1.4; }
    .chat-input::placeholder { color: var(--muted); }
    .chat-send { background: var(--accent); color: white; border: none; font-family: 'Bebas Neue', sans-serif; font-size: 0.85rem; letter-spacing: 2px; padding: 10px 16px; cursor: pointer; }
    .chat-send:hover { background: #ff5a20; }
    .chat-send:disabled { background: var(--muted); cursor: not-allowed; }
    .chat-clear { background: transparent; border: none; color: var(--muted); font-size: 0.6rem; letter-spacing: 1px; cursor: pointer; font-family: 'DM Mono', monospace; text-transform: uppercase; }
    .site-footer { max-width: 1200px; margin: 0 auto; padding: 20px 40px 40px; font-size: 0.6rem; color: var(--muted); letter-spacing: 1px; border-top: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
    .footer-logo { font-family: 'Bebas Neue', sans-serif; font-size: 1.1rem; letter-spacing: 4px; }
    .footer-logo .radar { color: var(--accent); }
    @media (max-width: 768px) {
      .nav { padding: 0 16px; }
      .nav-logo { font-size: 1.2rem; padding-right: 16px; }
      .nav-tab { padding: 0 12px; font-size: 0.55rem; }
      .section-wrap { padding: 40px 16px 80px; }
      .resell-stats { grid-template-columns: repeat(2, 1fr); }
      .auth-check { grid-template-columns: 1fr; }
      .chat-window { width: calc(100vw - 32px); right: 16px; }
    }
    /* Release Calendar */
    .cal-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 32px; flex-wrap: wrap; gap: 16px; }
    .cal-month-nav { display: flex; align-items: center; gap: 16px; }
    .cal-month-nav button { background: var(--surface); border: 1px solid var(--border); color: var(--text); font-family: 'DM Mono', monospace; font-size: 0.75rem; padding: 8px 16px; cursor: pointer; transition: all 0.15s; letter-spacing: 1px; }
    .cal-month-nav button:hover { border-color: var(--accent); color: var(--accent); }
    .cal-month-label { font-family: 'Bebas Neue', sans-serif; font-size: 2.4rem; letter-spacing: 3px; min-width: 260px; text-align: center; }
    .cal-month-label span { color: var(--accent); }
    .cal-view-toggle { display: flex; border: 1px solid var(--border); }
    .cal-view-btn { background: transparent; border: none; color: var(--muted); font-family: 'DM Mono', monospace; font-size: 0.6rem; letter-spacing: 2px; text-transform: uppercase; padding: 8px 18px; cursor: pointer; transition: all 0.15s; }
    .cal-view-btn.active { background: var(--accent); color: white; }
    .cal-filters { display: flex; gap: 8px; margin-bottom: 24px; flex-wrap: wrap; }
    .cal-filter-btn { background: transparent; border: 1px solid var(--border); color: var(--muted); font-family: 'DM Mono', monospace; font-size: 0.55rem; letter-spacing: 2px; text-transform: uppercase; padding: 6px 14px; cursor: pointer; transition: all 0.15s; white-space: nowrap; }
    .cal-filter-btn:hover { border-color: var(--text); color: var(--text); }
    .cal-filter-btn.active { border-color: var(--accent); color: var(--accent); background: rgba(255,60,0,0.08); }
    .cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; background: var(--border); border: 1px solid var(--border); margin-bottom: 40px; }
    .cal-day-header { background: var(--surface); padding: 10px; text-align: center; font-size: 0.55rem; letter-spacing: 3px; text-transform: uppercase; color: var(--muted); }
    .cal-day { background: var(--bg); min-height: 120px; padding: 8px; position: relative; transition: background 0.15s; }
    .cal-day:hover { background: #0e0e0e; }
    .cal-day.other-month { opacity: 0.3; }
    .cal-day.today { background: rgba(255,60,0,0.04); }
    .cal-day.today::after { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: var(--accent); }
    .cal-day-num { font-family: 'Bebas Neue', sans-serif; font-size: 1.2rem; color: var(--muted); margin-bottom: 4px; }
    .cal-day.today .cal-day-num { color: var(--accent); }
    .cal-release-pip { font-size: 0.45rem; padding: 2px 5px; margin-bottom: 2px; border-radius: 2px; cursor: pointer; transition: all 0.15s; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; letter-spacing: 0.5px; display: block; text-decoration: none; color: inherit; }
    .cal-release-pip:hover { transform: translateX(2px); filter: brightness(1.3); }
    .cal-release-pip.brand-jordan { background: rgba(255,60,0,0.15); color: #ff6b3d; border-left: 2px solid #ff3c00; }
    .cal-release-pip.brand-nike { background: rgba(255,255,255,0.06); color: #ccc; border-left: 2px solid #888; }
    .cal-release-pip.brand-adidas { background: rgba(0,200,120,0.1); color: #00e676; border-left: 2px solid #00e676; }
    .cal-release-pip.brand-nb { background: rgba(200,0,0,0.1); color: #ff5555; border-left: 2px solid #ff5555; }
    .cal-release-pip.brand-yeezy { background: rgba(200,180,100,0.1); color: #d4b957; border-left: 2px solid #d4b957; }
    .cal-release-pip.brand-collab { background: rgba(200,68,255,0.1); color: #cc44ff; border-left: 2px solid #cc44ff; }
    .cal-release-pip.brand-other { background: rgba(100,180,255,0.1); color: #64b5f6; border-left: 2px solid #64b5f6; }
    .cal-more { font-size: 0.45rem; color: var(--muted); padding: 2px 5px; cursor: pointer; }
    .cal-more:hover { color: var(--accent); }
    /* List view */
    .cal-list { display: flex; flex-direction: column; gap: 2px; }
    .cal-list-date { font-family: 'Bebas Neue', sans-serif; font-size: 1.4rem; letter-spacing: 2px; padding: 20px 0 8px; border-bottom: 1px solid var(--border); margin-bottom: 8px; color: var(--muted); }
    .cal-list-date span { color: var(--accent); }
    .cal-list-item { display: flex; align-items: center; gap: 16px; padding: 12px 16px; background: var(--surface); border: 1px solid var(--border); transition: all 0.15s; cursor: pointer; text-decoration: none; color: inherit; }
    .cal-list-item:hover { border-color: var(--accent); background: #161616; transform: translateX(4px); }
    .cal-list-img { width: 64px; height: 64px; background: var(--card); display: flex; align-items: center; justify-content: center; flex-shrink: 0; overflow: hidden; }
    .cal-list-img img { width: 100%; height: 100%; object-fit: contain; }
    .cal-list-info { flex: 1; min-width: 0; }
    .cal-list-name { font-family: 'Bebas Neue', sans-serif; font-size: 1.1rem; letter-spacing: 1px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .cal-list-meta { font-size: 0.6rem; color: var(--muted); letter-spacing: 0.5px; margin-top: 2px; }
    .cal-list-sku { font-size: 0.55rem; color: var(--muted); letter-spacing: 1px; margin-top: 1px; }
    .cal-list-price { font-family: 'Bebas Neue', sans-serif; font-size: 1.3rem; color: var(--green); white-space: nowrap; }
    .cal-list-actions { display: flex; gap: 6px; flex-shrink: 0; }
    .cal-list-btn { font-family: 'DM Mono', monospace; font-size: 0.5rem; letter-spacing: 1.5px; text-transform: uppercase; padding: 6px 12px; border: 1px solid var(--border); background: transparent; color: var(--text); cursor: pointer; transition: all 0.15s; text-decoration: none; display: inline-block; }
    .cal-list-btn:hover { border-color: var(--accent); color: var(--accent); }
    .cal-list-btn.primary { background: var(--accent); border-color: var(--accent); color: white; }
    .cal-list-btn.primary:hover { background: #ff5522; }
    .cal-legend { display: flex; gap: 16px; flex-wrap: wrap; padding: 16px 0; border-top: 1px solid var(--border); margin-top: 20px; }
    .cal-legend-item { display: flex; align-items: center; gap: 6px; font-size: 0.55rem; color: var(--muted); letter-spacing: 1px; }
    .cal-legend-dot { width: 8px; height: 8px; border-radius: 1px; }
    /* Release detail modal */
    .cal-modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 200; display: flex; align-items: center; justify-content: center; padding: 20px; animation: fadeIn 0.15s ease; }
    .cal-modal { background: var(--bg); border: 1px solid var(--border); max-width: 500px; width: 100%; max-height: 80vh; overflow-y: auto; }
    .cal-modal-head { display: flex; justify-content: space-between; align-items: flex-start; padding: 24px 24px 0; }
    .cal-modal-close { background: none; border: none; color: var(--muted); font-size: 1.2rem; cursor: pointer; }
    .cal-modal-close:hover { color: var(--text); }
    .cal-modal-img { width: 100%; aspect-ratio: 1; background: var(--surface); display: flex; align-items: center; justify-content: center; margin: 16px 0; overflow: hidden; }
    .cal-modal-img img { width: 80%; height: 80%; object-fit: contain; }
    .cal-modal-body { padding: 0 24px 24px; }
    .cal-modal-title { font-family: 'Bebas Neue', sans-serif; font-size: 1.8rem; letter-spacing: 1px; line-height: 1.1; }
    .cal-modal-details { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin: 16px 0; }
    .cal-modal-detail label { font-size: 0.5rem; letter-spacing: 2px; text-transform: uppercase; color: var(--muted); display: block; margin-bottom: 2px; }
    .cal-modal-detail span { font-family: 'Bebas Neue', sans-serif; font-size: 1.2rem; }
    .cal-modal-btns { display: flex; gap: 8px; margin-top: 16px; }
    .cal-modal-btns a { flex: 1; text-align: center; }
    /* Calendar stats bar */
    .cal-stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1px; background: var(--border); border: 1px solid var(--border); margin-bottom: 32px; }
    .cal-stat { background: var(--bg); padding: 16px 20px; }
    .cal-stat-label { font-size: 0.5rem; letter-spacing: 3px; text-transform: uppercase; color: var(--muted); margin-bottom: 4px; }
    .cal-stat-val { font-family: 'Bebas Neue', sans-serif; font-size: 1.8rem; letter-spacing: 1px; }
    .cal-stat-val.accent { color: var(--accent); }
    .cal-stat-val.green { color: var(--green); }
    @media (max-width: 768px) {
      .cal-grid { grid-template-columns: repeat(7, 1fr); }
      .cal-day { min-height: 70px; padding: 4px; }
      .cal-day-num { font-size: 0.9rem; }
      .cal-release-pip { font-size: 0.35rem; padding: 1px 3px; }
      .cal-stats { grid-template-columns: repeat(2, 1fr); }
      .cal-list-item { flex-wrap: wrap; gap: 10px; }
      .cal-list-actions { width: 100%; }
      .cal-list-btn { flex: 1; text-align: center; }
      .cal-month-label { font-size: 1.6rem; min-width: auto; }
      .cal-header { justify-content: center; }
      .cal-list-img { width: 50px; height: 50px; }
    }
  </style>
</head>
<body>
<div id="root"></div>
<div class="grain"></div>

<script type="text/babel">
const { useState, useRef, useEffect } = React;

const API_URL = "/.netlify/functions/anthropic";

const AFFILIATE = {
  stockx:      { tag: "YOUR_STOCKX_CODE",  param: "utm_source" },
  goat:        { tag: "YOUR_GOAT_CODE",    param: "ref" },
  footlocker:  { tag: "YOUR_FL_CODE",      param: "AID" },
  jd:          { tag: "YOUR_JD_CODE",      param: "affil" },
  hibbett:     { tag: "YOUR_HIBBETT_CODE", param: "ref" },
  champssports:{ tag: "YOUR_CHAMPS_CODE",  param: "AID" },
  eastbay:     { tag: "YOUR_EASTBAY_CODE", param: "AID" },
  kickscrew:   { tag: "YOUR_KC_CODE",      param: "ref" },
};
function affLink(url, sourceId) {
  if (!url) return "#";
  const aff = AFFILIATE[sourceId];
  if (!aff || aff.tag.startsWith("YOUR_")) return url;
  try { const u = new URL(url); u.searchParams.set(aff.param, aff.tag); u.searchParams.set("utm_campaign", "sneakyradar"); return u.toString(); } catch { return url; }
}
function trackClick(drop, storeId) { console.log(`[SNEAKYRADAR] click â€” ${drop.name} -> ${storeId}`); }

const SPONSORED_DROPS = [
  { sponsored: true, sponsorLabel: "Featured Drop", brand: "Nike", name: "Air Jordan 1 Retro High OG", date: "Mar 29, 2025", retail: "$180", resell: "$320+", hype: 98, badge: "hot", colorway: "University Blue/White", method: "SNKRS Draw", source: "SNKRS", image: null, sourceUrl: "https://nike.com/launch",
    prices: [{store:"SNKRS",storeId:"snkrs",price:"$180",url:"https://nike.com/launch"},{store:"StockX",storeId:"stockx",price:"$290",url:"https://stockx.com"},{store:"GOAT",storeId:"goat",price:"$305",url:"https://goat.com"}]},
];

const RESELL_DATA = [
  { brand:"Nike",name:"Air Jordan 4 Military Blue",retail:"$215",low:"$310",avg:"$348",high:"$420",trend:"+12%",hot:true,vol:"2.4k sales/wk"},
  { brand:"Nike",name:"Dunk Low Panda",retail:"$110",low:"$140",avg:"$158",high:"$185",trend:"+4%",hot:false,vol:"5.1k sales/wk"},
  { brand:"Adidas",name:"Samba OG Cloud White",retail:"$100",low:"$128",avg:"$142",high:"$165",trend:"+8%",hot:true,vol:"3.7k sales/wk"},
  { brand:"Nike",name:"Travis Scott Air Max 1",retail:"$150",low:"$420",avg:"$510",high:"$640",trend:"+22%",hot:true,vol:"890 sales/wk"},
  { brand:"New Balance",name:"990v4 Made in USA",retail:"$185",low:"$195",avg:"$208",high:"$240",trend:"+3%",hot:false,vol:"1.2k sales/wk"},
  { brand:"ASICS",name:"Gel-Kayano 14 Ivory",retail:"$130",low:"$165",avg:"$182",high:"$210",trend:"+6%",hot:true,vol:"1.8k sales/wk"},
  { brand:"Nike",name:"Off-White Dunk Low Lot 1",retail:"$170",low:"$800",avg:"$980",high:"$1300",trend:"+18%",hot:true,vol:"340 sales/wk"},
  { brand:"Adidas",name:"Yeezy Foam Runner MXT",retail:"$80",low:"$95",avg:"$115",high:"$145",trend:"-2%",hot:false,vol:"2.1k sales/wk"},
];

const AUTH_GUIDES = [
  { model:"Nike Dunk Low",difficulty:"Medium",fakeScore:87,checks:[
    {area:"Swoosh Shape",real:"Clean taper, consistent thickness end-to-end",fake:"Swoosh often too thick at toe end or uneven width",tip:"Hold at eye level â€” the Swoosh tip should come to a sharp, clean point"},
    {area:"Toe Box Stitching",real:"8-10 tight, even stitches per inch, no loose threads",fake:"Irregular spacing, loose threads, or glue visible at seams",tip:"Count the stitches â€” fakes usually have 5-7 sloppy stitches per inch"},
    {area:"Heel Tab",real:"Nike text perfectly centered, firm rubber, no flex",fake:"Text offset or blurry, softer rubber that bends easily",tip:"Press the heel tab â€” legit pairs feel dense and don't flex at all"},
    {area:"Size Tag",real:"Clean laser print, correct font weight, barcode scans correctly",fake:"Blurry or off-color print, barcode often doesn't scan",tip:"Scan the barcode â€” if it doesn't resolve to Nike, walk away"},
    {area:"Box Label",real:"Font matches Nike spec, SKU matches shoe colorway exactly",fake:"Slightly wrong font, SKU doesn't match the actual shoe",tip:"Cross-reference the SKU on the box with StockX or Nike's site"},
  ]},
  { model:"Air Jordan 1",difficulty:"Hard",fakeScore:94,checks:[
    {area:"Collar Stitching",real:"Single-row stitching, tight and consistent around full ankle collar",fake:"Double stitching or inconsistent tension â€” often puckers at the back",tip:"Run your finger around the collar â€” any puckering or double rows = fake"},
    {area:"Jumpman Logo",real:"Clean silhouette, arms and legs proportional, no bleed",fake:"Stubby legs, thick arms, or ink bleed into surrounding material",tip:"Compare against Nike SNKRS product photo â€” any proportion difference is a red flag"},
    {area:"Tongue Tag",real:"Bold clean font, correct thread color for colorway, no fraying",fake:"Lighter font weight, wrong thread color, fraying at edges",tip:"Thread color on tongue tag should exactly match the colorway's accent color"},
    {area:"Outsole",real:"Clean herringbone pattern, consistent depth, firm rubber",fake:"Shallow tread, softer rubber, or uneven depth across the sole",tip:"Press your thumbnail into the outsole â€” legit rubber resists; fakes dent"},
    {area:"Wings Logo",real:"Perfectly debossed into leather, uniform depth, no smearing",fake:"Stamped too shallow or unevenly â€” one wing often higher than the other",tip:"Check both wings are at identical height â€” uneven wings = likely fake"},
  ]},
  { model:"Yeezy 350 V2",difficulty:"Very Hard",fakeScore:96,checks:[
    {area:"Primeknit Pattern",real:"Consistent 3-stripe weave, no loose threads, pattern aligns at seams",fake:"Slightly off-pattern weave, threads visible, misaligned at seam joins",tip:"Under bright light, check that weave pattern flows seamlessly across every seam"},
    {area:"SPLY-350 Text",real:"Consistent font, correct 45 degree lean angle, slightly reflective",fake:"Wrong font weight, doesn't reflect correctly, or angle is off",tip:"SPLY-350 should be at exactly 45 degrees â€” use a protractor app if unsure"},
    {area:"Boost Sole",real:"Hundreds of uniform beads, consistent translucency, firm but springy",fake:"Inconsistent bead size, too opaque or too clear, feels harder",tip:"Squeeze the Boost midsole â€” it should spring back instantly"},
    {area:"Heel Patch",real:"Perfectly adhered, no lifting edges, correct font and spacing",fake:"Lifting at edges, adhesive visible, font slightly too bold or light",tip:"Press down on all four corners of the heel patch â€” any lift = fake"},
    {area:"Inner Label",real:"Correct Adidas font, clean print, QR code resolves to Adidas",fake:"Slightly blurry print, QR code leads nowhere",tip:"Scan the QR code â€” it should go directly to the Adidas product page"},
  ]},
  { model:"New Balance 550",difficulty:"Easy",fakeScore:71,checks:[
    {area:"N Logo Stitching",real:"Clean multi-layer embroidery, correct stitch count, firm backing",fake:"Single layer, floppy logo, visible backing through the N stitches",tip:"Pinch the N logo â€” on legit pairs it feels thick and structured"},
    {area:"Toe Cap Shape",real:"Slightly rounded, consistent curve, leather meets mesh cleanly",fake:"Too flat or too pointed, leather and mesh don't meet evenly",tip:"View from directly above â€” toe cap curve should be perfectly symmetrical"},
    {area:"Outsole Color",real:"Off-white or cream on most colorways, consistent across full length",fake:"Bright white on colorways that should be cream, or uneven coloring",tip:"Outsole color should always match product photos exactly"},
  ]},
];

const ALL_SOURCES = [
  {id:"stockx",label:"StockX",url:"stockx.com",color:"#00ff94"},
  {id:"goat",label:"GOAT",url:"goat.com",color:"#ffffff"},
];

const BRAND_FILTERS = ["All","Nike","Jordan","Adidas","New Balance","ASICS","Puma","Reebok","On Running"];

const DEFAULT_DROPS = [
  {brand:"Jordan",name:"Teyana Taylor x Air Jordan 3 Concrete Rose",date:"Mar 7, 2026",retail:"$280",resell:"$450+",hype:96,badge:"hot",colorway:"Fir/Gorge Green-Cement Grey",method:"SNKRS Draw",source:"SNKRS",image:null,sourceUrl:"https://nike.com/launch",prices:[{store:"SNKRS",storeId:"snkrs",price:"$280",url:"https://nike.com/launch"},{store:"StockX",storeId:"stockx",price:"$450",url:"https://stockx.com"},{store:"GOAT",storeId:"goat",price:"$460",url:"https://goat.com"}]},
  {brand:"Jordan",name:"Air Jordan 4 Lakers",date:"Mar 7, 2026",retail:"$220",resell:"$380+",hype:94,badge:"hot",colorway:"Imperial Purple/Multi-Color",method:"SNKRS",source:"SNKRS",image:null,sourceUrl:"https://nike.com/launch",prices:[{store:"SNKRS",storeId:"snkrs",price:"$220",url:"https://nike.com/launch"},{store:"StockX",storeId:"stockx",price:"$380",url:"https://stockx.com"},{store:"GOAT",storeId:"goat",price:"$390",url:"https://goat.com"}]},
  {brand:"Jordan",name:"Air Jordan 13 Chicago",date:"Mar 13, 2026",retail:"$215",resell:"$320+",hype:91,badge:"hot",colorway:"White/Black-True Red",method:"SNKRS",source:"SNKRS",image:null,sourceUrl:"https://nike.com/launch",prices:[{store:"SNKRS",storeId:"snkrs",price:"$215",url:"https://nike.com/launch"},{store:"StockX",storeId:"stockx",price:"$320",url:"https://stockx.com"},{store:"GOAT",storeId:"goat",price:"$330",url:"https://goat.com"}]},
  {brand:"Jordan",name:"Air Jordan 14 Black University Blue",date:"Mar 21, 2026",retail:"$205",resell:"$280+",hype:82,badge:"upcoming",colorway:"Black/University Blue",method:"SNKRS",source:"SNKRS",image:null,sourceUrl:"https://nike.com/launch",prices:[{store:"SNKRS",storeId:"snkrs",price:"$205",url:"https://nike.com/launch"},{store:"StockX",storeId:"stockx",price:"$280",url:"https://stockx.com"},{store:"GOAT",storeId:"goat",price:"$290",url:"https://goat.com"}]},
  {brand:"Jordan",name:"Virgil Abloh x Air Jordan 1 High Alaska",date:"Mar 28, 2026",retail:"$230",resell:"$600+",hype:99,badge:"limited",colorway:"White/White",method:"SNKRS Draw",source:"SNKRS",image:null,sourceUrl:"https://nike.com/launch",prices:[{store:"SNKRS",storeId:"snkrs",price:"$230",url:"https://nike.com/launch"},{store:"StockX",storeId:"stockx",price:"$600",url:"https://stockx.com"},{store:"GOAT",storeId:"goat",price:"$620",url:"https://goat.com"}]},
  {brand:"Nike",name:"Air Max 95 OG Neon",date:"Mar 5, 2026",retail:"$190",resell:"$250+",hype:88,badge:"hot",colorway:"Black/Cool Grey-Neon Yellow",method:"Nike.com",source:"Nike",image:null,sourceUrl:"https://nike.com",prices:[{store:"Nike",storeId:"nike",price:"$190",url:"https://nike.com"},{store:"StockX",storeId:"stockx",price:"$250",url:"https://stockx.com"},{store:"GOAT",storeId:"goat",price:"$260",url:"https://goat.com"}]},
];

const DROP_SYSTEM_PROMPT = (sl) => `Search ${sl} for upcoming sneaker drops. Return ONLY a JSON array, max 4 items: [{"brand":"Nike","name":"Name","date":"Mar 15 2025","retail":"$150","resell":"$200+","hype":85,"badge":"hot","colorway":"Color","method":"Method","image":null,"source":"${sl}","sourceUrl":"https://url"}] ONLY the array.`;
const CHAT_SYSTEM_PROMPT = `You are SOLE â€” elite sneaker expert on SNEAKYRADAR. Deep knowledge of brands, drops, resell market, authentication, styling, collabs, history. Confident, street-savvy tone. Format shoe names **bold** and prices *italic*.`;
const SUGGESTED_QUESTIONS = ["What's the most hyped drop right now?","Best sneakers under $150?","How do I win SNKRS draws?","Which Jordans should I flip?"];

function parseDrops(text, sl) {
  const j = text.match(/```json\n([\s\S]*?)\n```/);
  if (j) { try { const d = JSON.parse(j[1]); if (Array.isArray(d)) return d.map(x=>({...x,source:x.source||sl})); } catch(e){} }
  const a = text.match(/\[[\s\S]*\]/);
  if (a) { try { const d = JSON.parse(a[0]); if (Array.isArray(d)) return d.map(x=>({...x,source:x.source||sl})); } catch(e){} }
  return [];
}
function dedupeDrops(drops) {
  const seen = new Map();
  for (const d of drops) {
    const key = `${d.brand?.toLowerCase()}-${d.name?.toLowerCase().replace(/\s+/g,'')}`;
    if (!seen.has(key)) { seen.set(key,{...d,sources:[d.source].filter(Boolean)}); }
    else { const e=seen.get(key); if(d.source&&!e.sources.includes(d.source))e.sources.push(d.source); if(d.hype>e.hype)e.hype=d.hype; }
  }
  return Array.from(seen.values()).sort((a,b)=>b.hype-a.hype);
}
async function fetchSource(src, q) {
  const prompt = q ? `Search ${src.label} (${src.url}) for sneaker releases related to: "${q}".` : `Search ${src.label} (${src.url}) for the most anticipated upcoming sneaker drops.`;
  const res = await fetch(API_URL, { method:"POST", headers:{"Content-Type":"application/json"}, body:JSON.stringify({ model:"claude-sonnet-4-6", max_tokens:800, system:DROP_SYSTEM_PROMPT(src.label), tools:[{type:"web_search_20250305",name:"web_search"}], messages:[{role:"user",content:prompt}] }) });
  const data = await res.json();
  if (!res.ok) throw new Error(data.error?.message || JSON.stringify(data));
  const text = data.content?.filter(b=>b.type==="text").map(b=>b.text).join("\n")||"";
  return parseDrops(text, src.label);
}
function fmtMsg(t) { return t.replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>').replace(/\*(.*?)\*/g,'<em>$1</em>').replace(/\n/g,'<br/>'); }

const BADGE_MAP = {hot:"badge-hot",upcoming:"badge-upcoming",limited:"badge-limited"};
const BADGE_LABELS = {hot:"ðŸ”¥ HOT",upcoming:"UPCOMING",limited:"LIMITED"};

const imageCache = {};
async function fetchSneakerImage(name, brand) {
  const key = `${brand||""}-${name||""}`.toLowerCase();
  if (imageCache[key]) return imageCache[key];
  if (imageCache[key] === null) return null;
  try {
    const query = encodeURIComponent((brand && !name.toLowerCase().includes(brand.toLowerCase()) ? brand + " " + name : name) + " sneaker");
    const r = await fetch("/.netlify/functions/anthropic", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ action: "sneaker_image", query })
    });
    const d = await r.json();
    imageCache[key] = d.thumbnail || null;
    return imageCache[key];
  } catch(e) {
    imageCache[key] = null;
    return null;
  }
}

function DropImage({src, name, brand, source, onClick}) {
  const [imgSrc, setImgSrc] = useState(src || null);
  const [err, setErr] = useState(false);

  useEffect(() => {
    if (!imgSrc && name) {
      const timer = setTimeout(() => {
        fetchSneakerImage(name, brand).then(url => { if (url) setImgSrc(url); });
      }, Math.random() * 2000);
      return () => clearTimeout(timer);
    }
  }, [name, brand]);

  return (
    <div className="card-img-wrap" onClick={onClick}>
      {(!imgSrc || err) ? <div className="card-img-placeholder">{(name||"?")[0].toUpperCase()}</div>
        : <img className="card-img" src={imgSrc} alt={name} onError={()=>setErr(true)} loading="lazy"/>}
      {source && <div className="card-source-tag">{source}</div>}
    </div>
  );
}

function PriceCompare({prices, drop}) {
  if (!prices?.length) return null;
  const sorted = [...prices].sort((a,b)=>parseFloat(a.price.replace(/[^0-9.]/g,''))-parseFloat(b.price.replace(/[^0-9.]/g,'')));
  return (
    <div className="price-compare">
      <div className="price-compare-label">Best Price</div>
      <div className="price-compare-rows">
        {sorted.map((p,i)=>(
          <div key={p.store} className="price-row">
            <span className="price-row-store">{p.store}</span>
            <span className="price-row-amount">{p.price}</span>
            <a href={affLink(p.url,p.storeId)} target="_blank" rel="noopener noreferrer"
              className={`price-row-btn ${i===0?"best":""}`}
              onClick={e=>{e.stopPropagation();trackClick(drop,p.storeId);}}>
              {i===0?"Best Deal":"Buy"}
            </a>
          </div>
        ))}
      </div>
    </div>
  );
}

function SourceDropdown({selected, onChange}) {
  const [open, setOpen] = useState(false);
  const ref = useRef(null);
  useEffect(()=>{
    const h = e=>{if(ref.current&&!ref.current.contains(e.target))setOpen(false);};
    document.addEventListener("mousedown",h);
    return()=>document.removeEventListener("mousedown",h);
  },[]);
  const toggle = id => onChange(selected.includes(id)?selected.filter(s=>s!==id):[...selected,id]);
  return (
    <div className="src-dropdown-wrap" ref={ref}>
      <button className="src-dropdown-btn" onClick={()=>setOpen(o=>!o)}>
        <span>{selected.length===0?"No Sources":selected.length===ALL_SOURCES.length?"All Sources":`${selected.length} Sources`}</span>
        <span style={{display:"flex",alignItems:"center",gap:8}}>
          {selected.length>0&&selected.length<ALL_SOURCES.length&&<span className="count-badge">{selected.length}</span>}
          <span className={`chevron ${open?"open":""}`}>â–¼</span>
        </span>
      </button>
      {open&&(
        <div className="src-dropdown-menu">
          <div className="src-menu-header">
            <span>{ALL_SOURCES.length} Sources</span>
            <div style={{display:"flex",gap:12}}>
              <button onClick={()=>onChange(ALL_SOURCES.map(s=>s.id))}>All</button>
              <button onClick={()=>onChange([])}>Clear</button>
            </div>
          </div>
          {ALL_SOURCES.map(s=>(
            <div key={s.id} className={`src-menu-item ${selected.includes(s.id)?"checked":""}`} onClick={()=>toggle(s.id)}>
              <div className={`src-checkbox ${selected.includes(s.id)?"checked":""}`}/>
              <div className="src-color-dot" style={{background:s.color}}/>
              <span className="src-label">{s.label}</span>
              <span className="src-url">{s.url}</span>
            </div>
          ))}
        </div>
      )}
    </div>
  );
}

function AlertModal({onClose}) {
  const [email, setEmail] = useState("");
  const [done, setDone] = useState(false);
  const submit = ()=>{ if(!email.includes("@"))return; console.log("[SNEAKYRADAR] subscriber:",email); setDone(true); };
  return (
    <div className="modal-overlay" onClick={e=>e.target===e.currentTarget&&onClose()}>
      <div className="modal">
        {done?(
          <div className="modal-success" style={{textAlign:"center",padding:"40px 28px"}}>
            <div style={{fontSize:"2.5rem",marginBottom:12}}>ðŸ”¥</div>
            <div style={{fontFamily:"'Bebas Neue',sans-serif",fontSize:"1.8rem",letterSpacing:"3px",color:"var(--accent2)"}}>You're In</div>
            <div style={{fontSize:"0.7rem",color:"var(--muted)",marginTop:8}}>Drop alerts locked in for {email}</div>
          </div>
        ):(
          <>
            <div className="modal-header">
              <div className="modal-title">SNEAKY<span>ALERTS</span></div>
              <button className="modal-close" onClick={onClose}>âœ•</button>
            </div>
            <div className="modal-body">
              <div className="modal-desc">Get in before everyone else. 48hr advance notice, restocks, exclusive raffle links â€” straight to your inbox.</div>
              <div className="modal-features">
                {["48hr advance drop notices","Restock alerts on sold-out grails","Exclusive raffle links before public","Weekly resell market digest"].map(f=>(
                  <div key={f} className="modal-feature"><div className="modal-feature-dot"/>{f}</div>
                ))}
              </div>
              <div className="modal-form">
                <input className="modal-input" type="email" placeholder="your@email.com" value={email} onChange={e=>setEmail(e.target.value)} onKeyDown={e=>e.key==="Enter"&&submit()}/>
                <button className="modal-submit" onClick={submit}>ALERT ME</button>
              </div>
              <div className="modal-fine">No spam. Unsubscribe anytime.</div>
            </div>
          </>
        )}
      </div>
    </div>
  );
}

function ChatWidget() {
  const [open, setOpen] = useState(false);
  const [msgs, setMsgs] = useState([{role:"assistant",content:"Yo, I'm **SOLE** â€” your sneaker expert on SNEAKYRADAR. Ask me about drops, resell, authentication, anything."}]);
  const [input, setInput] = useState("");
  const [thinking, setThinking] = useState(false);
  const [showSug, setShowSug] = useState(true);
  const bottomRef = useRef(null);
  const inputRef = useRef(null);
  useEffect(()=>{bottomRef.current?.scrollIntoView({behavior:"smooth"});},[msgs,thinking]);
  useEffect(()=>{if(open)setTimeout(()=>inputRef.current?.focus(),100);},[open]);
  const send = async (text)=>{
    const t=text||input.trim(); if(!t||thinking)return;
    setInput(""); setShowSug(false);
    const newMsgs=[...msgs,{role:"user",content:t}];
    setMsgs(newMsgs); setThinking(true);
    try {
      const res = await fetch(API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"claude-sonnet-4-6",max_tokens:600,system:CHAT_SYSTEM_PROMPT,messages:newMsgs.map(m=>({role:m.role,content:typeof m.content==="string"?m.content.replace(/<[^>]+>/g,""):m.content}))})});
      const data = await res.json();
      if(!res.ok)throw new Error(JSON.stringify(data.error)||JSON.stringify(data));
      const reply = data.content?.filter(b=>b.type==="text").map(b=>b.text).join("")||"No response";
      setMsgs(p=>[...p,{role:"assistant",content:reply}]);
    } catch(e){setMsgs(p=>[...p,{role:"assistant",content:`Error: ${e.message}`}]);}
    finally{setThinking(false);}
  };
  return (
    <>
      {open&&(
        <div className="chat-window">
          <div className="chat-header">
            <div className="chat-header-left">
              <div className="chat-avatar">S</div>
              <div>
                <div className="chat-title">SOLE EXPERT</div>
                <div className="chat-subtitle"><span className="chat-online"/>Online Â· Sneaker AI</div>
              </div>
            </div>
            <div style={{display:"flex",alignItems:"center",gap:12}}>
              <button className="chat-clear" onClick={()=>{setMsgs([{role:"assistant",content:"Fresh start. What do you want to know?"}]);setShowSug(true);}}>Clear</button>
              <button className="chat-close" onClick={()=>setOpen(false)}>âœ•</button>
            </div>
          </div>
          <div className="chat-messages">
            {msgs.map((m,i)=>(
              <div key={i} className={`msg ${m.role==="user"?"user":"bot"}`}>
                <div className={`msg-avatar ${m.role==="user"?"user":"bot"}`}>{m.role==="user"?"U":"S"}</div>
                <div className="msg-bubble" dangerouslySetInnerHTML={{__html:fmtMsg(m.content)}}/>
              </div>
            ))}
            {thinking&&<div className="msg bot"><div className="msg-avatar bot">S</div><div className="msg-bubble"><div className="typing-indicator"><div className="typing-dot"/><div className="typing-dot"/><div className="typing-dot"/></div></div></div>}
            <div ref={bottomRef}/>
          </div>
          {showSug&&<div className="chat-suggestions">{SUGGESTED_QUESTIONS.map((q,i)=><button key={i} className="suggestion-chip" onClick={()=>send(q)}>{q}</button>)}</div>}
          <div className="chat-input-row">
            <textarea ref={inputRef} className="chat-input" value={input} onChange={e=>setInput(e.target.value)} onKeyDown={e=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();send();}}} placeholder="Ask about any sneaker..." rows={1}/>
            <button className="chat-send" onClick={()=>send()} disabled={thinking||!input.trim()}>SEND</button>
          </div>
        </div>
      )}
      <button className="chat-fab" onClick={()=>setOpen(o=>!o)}>
        {open?<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
          :<><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg><span>ASK SOLE</span></>}
      </button>
    </>
  );
}

function DropRadarPage() {
  const [drops, setDrops] = useState(DEFAULT_DROPS);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [brandFilter, setBrandFilter] = useState("All");
  const [srcFilter, setSrcFilter] = useState("All");
  const [query, setQuery] = useState("");
  const [updated, setUpdated] = useState(null);
  const [steps, setSteps] = useState([]);
  const [selectedSources, setSelectedSources] = useState(ALL_SOURCES.map(s=>s.id));

  const search = async (q="")=>{
    if(!selectedSources.length){setError("Select at least one source.");return;}
    setLoading(true); setError(null);
    const srcs = ALL_SOURCES.filter(s=>selectedSources.includes(s.id));
    setSteps(srcs.map(s=>({label:s.label,status:"pending"})));
    const all=[];
    await Promise.all(srcs.map(async(src,idx)=>{
      setSteps(p=>p.map((s,i)=>i===idx?{...s,status:"active"}:s));
      try{const r=await fetchSource(src,q);all.push(...r);setSteps(p=>p.map((s,i)=>i===idx?{...s,status:"done",count:r.length}:s));}
      catch(e){console.error(src.label,e);setSteps(p=>p.map((s,i)=>i===idx?{...s,status:"done",count:0}:s));}
    }));
    const d=dedupeDrops(all);
    setDrops(d.length>0?d:DEFAULT_DROPS);
    if(!d.length)setError("Could not fetch live data. Showing cached drops.");
    setUpdated(new Date().toLocaleTimeString());
    if (d.length > 0) {
      localStorage.setItem("sneakyradar_drops", JSON.stringify(d));
      localStorage.setItem("sneakyradar_drops_time", Date.now().toString());
    }
    setLoading(false);
  };

  useEffect(() => {
    const cached = localStorage.getItem("sneakyradar_drops");
    const cachedTime = localStorage.getItem("sneakyradar_drops_time");
    const oneHour = 60 * 60 * 1000;
    if (cached && cachedTime && Date.now() - parseInt(cachedTime) < oneHour) {
      try { setDrops(JSON.parse(cached)); return; } catch(e) {}
    }
    search();
  }, []);

  const allSrcLabels=[...new Set(drops.map(d=>d.source).filter(Boolean))];
  const allDrops=[...SPONSORED_DROPS,...drops];
  const filtered=allDrops.filter(d=>{
    if(d.sponsored)return true;
    return(brandFilter==="All"||d.brand?.toLowerCase()===brandFilter.toLowerCase())&&
           (srcFilter==="All"||d.source===srcFilter||d.sources?.includes(srcFilter));
  });

  return (
    <div className="page">
      <div className="section-wrap">
        <div className="section-eyebrow">Live Intelligence</div>
        <h1 className="section-title"><span className="filled">DROP</span> <span className="outline">RADAR</span></h1>
        <p className="section-sub">Release tracking across every major retailer. Every upcoming drop, deduplicated and ranked by hype score.</p>
        <div className="search-row">
          <div className="search-bar">
            <input value={query} onChange={e=>setQuery(e.target.value)} placeholder="Search brand, colorway, silhouette..." onKeyDown={e=>e.key==="Enter"&&search(query)}/>
          </div>
          <SourceDropdown selected={selectedSources} onChange={setSelectedSources}/>
          <button className="search-go-btn" onClick={()=>search(query)} disabled={loading}>{loading?"SCANNING...":"SEARCH"}</button>
        </div>
        <div className="filters">
          {BRAND_FILTERS.map(f=><button key={f} className={`filter-btn ${brandFilter===f?"active":""}`} onClick={()=>setBrandFilter(f)}>{f}</button>)}
        </div>
        {allSrcLabels.length>0&&(
          <div className="result-source-filters">
            <button className={`rsf-btn ${srcFilter==="All"?"active":""}`} onClick={()=>setSrcFilter("All")}><span className="dot" style={{background:"var(--muted)"}}/>All Results</button>
            {allSrcLabels.map(s=>{const src=ALL_SOURCES.find(x=>x.label===s);return(
              <button key={s} className={`rsf-btn ${srcFilter===s?"active":""}`} style={srcFilter===s?{borderColor:src?.color,color:src?.color}:{}} onClick={()=>setSrcFilter(s===srcFilter?"All":s)}>
                <span className="dot" style={{background:src?.color||"var(--muted)"}}/>{s}
              </button>
            );})}
          </div>
        )}
        {error&&<div className="error-msg">âš  {error}</div>}
        {loading&&steps.length>0&&(
          <div className="progress-steps">
            {steps.map((s,i)=><div key={i} className="progress-step"><div className={`step-dot ${s.status}`}/><span className={`step-label ${s.status}`}>{s.status==="done"?`âœ“ ${s.label}${s.count!=null?` (${s.count})`:""}`:s.status==="active"?`scanning ${s.label}...`:s.label}</span></div>)}
          </div>
        )}
        <div className="status-bar">
          <div className="pulse-dot"/>
          {loading?`Scanning ${selectedSources.length} sources...`:`${filtered.length} drops tracked`}
          {updated&&<span style={{marginLeft:"auto"}}>Updated {updated}</span>}
        </div>
        {loading?(
          <div className="loading-grid">
            {[1,2,3,4,5,6].map(i=><div key={i} className="loading-card"><div className="loading-img"/><div className="loading-body"><div className="skeleton" style={{width:"60px",height:"10px"}}/><div className="skeleton" style={{width:"70%",height:"24px",marginTop:"8px"}}/><div className="skeleton" style={{width:"100%",height:"8px",marginTop:"12px"}}/></div></div>)}
          </div>
        ):filtered.length===0?(
          <div className="empty-state"><h2>NO DROPS</h2>adjust your filters</div>
        ):(
          <div className="grid">
            {filtered.map((drop,i)=>(
              <div key={i} className={`card ${drop.sponsored?"sponsored":""}`}>
                {drop.sponsored&&<div className="sponsor-banner"><span>{drop.sponsorLabel||"Featured"}</span><span style={{fontSize:"0.45rem",opacity:0.6}}>Sponsored</span></div>}
                <DropImage src={drop.image} name={drop.name} brand={drop.brand} source={drop.source} onClick={()=>{if(drop.sourceUrl){trackClick(drop,drop.source?.toLowerCase());window.open(affLink(drop.sourceUrl,drop.source?.toLowerCase()),"_blank");}}}/>
                <div className="card-body">
                  {drop.badge&&<div className={`badge ${BADGE_MAP[drop.badge]||"badge-upcoming"}`}>{BADGE_LABELS[drop.badge]||drop.badge}</div>}
                  <div className="card-brand">{drop.brand}</div>
                  <div className="card-name" onClick={()=>{if(drop.sourceUrl)window.open(affLink(drop.sourceUrl,drop.source?.toLowerCase()),"_blank");}}>{drop.name}</div>
                  {drop.colorway&&<div className="card-colorway">{drop.colorway}</div>}
                  <div className="card-meta">
                    <div className="meta-row"><span className="meta-label">Release</span><span className="meta-value">{drop.date||"TBD"}</span></div>
                    <div className="meta-row"><span className="meta-label">Retail</span><span className="price">{drop.retail||"â€”"}</span></div>
                    {drop.resell&&<div className="meta-row"><span className="meta-label">Est. Resell</span><span className="meta-value">{drop.resell}</span></div>}
                    {drop.method&&<div className="meta-row"><span className="meta-label">Method</span><span className="meta-value" style={{fontSize:"0.65rem"}}>{drop.method}</span></div>}
                  </div>
                  {drop.hype&&<><div className="hype-bar"><div className="hype-fill" style={{width:`${drop.hype}%`}}/></div><div className="hype-label"><span>Hype Index</span><span>{drop.hype}/100</span></div></>}
                  <PriceCompare prices={drop.prices} drop={drop}/>
                </div>
              </div>
            ))}
          </div>
        )}
      </div>
    </div>
  );
}

function ResellPage() {
  const [sortCol, setSortCol] = useState("avg");
  const [brandFilter, setBrandFilter] = useState("All");
  const brands=["All",...new Set(RESELL_DATA.map(d=>d.brand))];
  const sorted=[...RESELL_DATA].filter(d=>brandFilter==="All"||d.brand===brandFilter).sort((a,b)=>{
    const p=v=>parseFloat(v.replace(/[^0-9.]/g,''));
    if(sortCol==="avg")return p(b.avg)-p(a.avg);
    if(sortCol==="trend")return parseFloat(b.trend)-parseFloat(a.trend);
    return 0;
  });
  return (
    <div className="page">
      <div className="section-wrap">
        <div className="section-eyebrow">Market Intelligence</div>
        <h1 className="section-title"><span className="filled">RESELL</span> <span className="outline">TRACKER</span></h1>
        <p className="section-sub">Retail vs. market price, trend direction, and weekly sales volume â€” everything you need to buy, hold, or flip.</p>
        <div className="resell-stats">
          <div className="resell-stat"><div className="resell-stat-label">Avg Premium</div><div className="resell-stat-value">+87%</div><div className="resell-stat-sub">above retail across tracked models</div></div>
          <div className="resell-stat"><div className="resell-stat-label">Hottest Model</div><div className="resell-stat-value">AJ1</div><div className="resell-stat-sub">Air Jordan 1 collab avg +$340</div></div>
          <div className="resell-stat"><div className="resell-stat-label">Best Flip</div><div className="resell-stat-value">OW</div><div className="resell-stat-sub">Off-White Dunk avg 476% ROI</div></div>
          <div className="resell-stat"><div className="resell-stat-label">Weekly Vol</div><div className="resell-stat-value">16k</div><div className="resell-stat-sub">verified sales tracked this week</div></div>
        </div>
        <div className="filters" style={{marginBottom:20}}>
          {brands.map(b=><button key={b} className={`filter-btn ${brandFilter===b?"active":""}`} onClick={()=>setBrandFilter(b)}>{b}</button>)}
        </div>
        <table className="resell-table">
          <thead><tr>
            <th>Model</th><th>Retail</th>
            <th style={{color:sortCol==="avg"?"var(--accent2)":"var(--muted)"}} onClick={()=>setSortCol("avg")}>Avg {sortCol==="avg"?"â†“":""}</th>
            <th>Low / High</th>
            <th style={{color:sortCol==="trend"?"var(--accent2)":"var(--muted)"}} onClick={()=>setSortCol("trend")}>Trend {sortCol==="trend"?"â†“":""}</th>
            <th>Volume</th><th>Buy</th>
          </tr></thead>
          <tbody>
            {sorted.map((d,i)=>(
              <tr key={i}>
                <td><div style={{display:"flex",alignItems:"center",gap:10}}>{d.hot&&<span className="hot-tag">HOT</span>}<div><div className="resell-brand">{d.brand}</div><div className="resell-name">{d.name}</div></div></div></td>
                <td><span className="resell-price-low">{d.retail}</span></td>
                <td><span className="resell-price-avg">{d.avg}</span></td>
                <td><span className="resell-price-low">{d.low}</span><span style={{color:"var(--border)",margin:"0 4px"}}>/</span><span className="resell-price-high">{d.high}</span></td>
                <td><span className={d.trend.startsWith("-")?"trend-down":"trend-up"}>{d.trend}</span></td>
                <td><span className="vol-tag">{d.vol}</span></td>
                <td><div style={{display:"flex",gap:6}}>
                  <a href={`https://stockx.com/search?s=${encodeURIComponent(d.name)}`} target="_blank" rel="noopener noreferrer" className="resell-buy-btn">StockX</a>
                  <a href={`https://goat.com/search?query=${encodeURIComponent(d.name)}`} target="_blank" rel="noopener noreferrer" className="resell-buy-btn">GOAT</a>
                </div></td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
}

function AuthPage() {
  const [selected, setSelected] = useState(null);
  return (
    <div className="page">
      <div className="section-wrap">
        <div className="section-eyebrow">Know Before You Buy</div>
        <h1 className="section-title"><span className="filled">AUTH</span> <span className="outline">GUIDE</span></h1>
        <p className="section-sub">Spot fakes before you get burned. Expert check-by-check authentication guides for the most-faked silhouettes.</p>
        <div className="auth-grid">
          {AUTH_GUIDES.map((g,i)=>(
            <div key={i} className={`auth-card ${selected===i?"selected":""}`} onClick={()=>setSelected(selected===i?null:i)}>
              <div className="auth-model">{g.model}</div>
              <div className={`auth-diff ${g.difficulty.toLowerCase().replace(" ","")}`}>{g.difficulty} to Fake</div>
              <div><div className="fake-score-label"><span>Fake Prevalence</span><span>{g.fakeScore}%</span></div><div className="fake-score-bar"><div className="fake-score-fill" style={{width:`${g.fakeScore}%`}}/></div></div>
              <div className="auth-cta">{selected===i?"â–² Collapse":"â–¼ View "+g.checks.length+" checks"}</div>
            </div>
          ))}
        </div>
        {selected!==null&&(
          <div className="auth-detail">
            <div className="auth-detail-header">
              <div className="auth-detail-title">{AUTH_GUIDES[selected].model} â€” Authentication Checklist</div>
              <button className="auth-detail-close" onClick={()=>setSelected(null)}>âœ• Close</button>
            </div>
            <div style={{padding:"10px 28px",background:"#0e0e0e",borderBottom:"1px solid var(--border)",display:"grid",gridTemplateColumns:"160px 1fr 1fr 1fr",gap:20}}>
              <div style={{fontSize:"0.5rem",letterSpacing:"3px",textTransform:"uppercase",color:"var(--muted)"}}>Check Area</div>
              <div style={{fontSize:"0.5rem",letterSpacing:"3px",textTransform:"uppercase",color:"var(--green)"}}>âœ“ Legit</div>
              <div style={{fontSize:"0.5rem",letterSpacing:"3px",textTransform:"uppercase",color:"var(--accent)"}}>âœ— Fake</div>
              <div style={{fontSize:"0.5rem",letterSpacing:"3px",textTransform:"uppercase",color:"var(--accent2)"}}>ðŸ’¡ Pro Tip</div>
            </div>
            <div>
              {AUTH_GUIDES[selected].checks.map((c,i)=>(
                <div key={i} className="auth-check">
                  <div className="auth-check-area">{c.area}</div>
                  <div className="auth-check-real">{c.real}</div>
                  <div className="auth-check-fake">{c.fake}</div>
                  <div className="auth-check-tip">{c.tip}</div>
                </div>
              ))}
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

function ReleasesPage() {
  const { useState, useMemo } = React;
  const today = new Date();
  const [monthOffset, setMonthOffset] = useState(0);
  const [view, setView] = useState("list");
  const [brandFilter, setBrandFilter] = useState("ALL");
  const [selectedRelease, setSelectedRelease] = useState(null);

  const releases = [
    // FEBRUARY 2026 (recent/just dropped)
    {name:"Air Jordan 5 \"Wolf Grey\"",sku:"DD0587-002",date:"2026-02-28",price:220,brand:"Jordan",color:"Light Graphite/White-Wolf Grey"},
    {name:"Fragment x Union x Air Jordan 1 High OG",sku:"IO7847-002",date:"2026-02-27",price:200,brand:"Jordan",color:"Black/Varsity Red-Sport Royal-White",collab:true},
    {name:"Fragment x Union x Air Jordan 1 High OG",sku:"IO7847-001",date:"2026-02-26",price:200,brand:"Jordan",color:"Black/Navy-Royal-Sail",collab:true},
    {name:"Air Jordan 1 Low \"Lucky Cat\"",sku:"IQ3460-010",date:"2026-03-01",price:145,brand:"Jordan",color:"Black/Multi"},
    // MARCH 2026
    {name:"Nike ACG Ultrafly 3",sku:"IR7317-300",date:"2026-03-02",price:250,brand:"Nike",color:"Green/Multi"},
    {name:"Nike LeBron 23 \"The Decision\"",sku:"IB9557-601",date:"2026-03-03",price:210,brand:"Nike",color:"Pink/Multi"},
    {name:"Nike Air Max 95 \"Neon\" Big Bubble",sku:"HM4740-001",date:"2026-03-05",price:190,brand:"Nike",color:"Black/Neon Yellow"},
    {name:"Teyana Taylor x Air Jordan 3 \"Concrete Rose\"",sku:"IF3097-300",date:"2026-03-07",price:280,brand:"Jordan",color:"Fir/Fire Red-Victory Green-Cement Grey",collab:true},
    {name:"Air Jordan 4 OG \"Lakers\"",sku:"FV5029-500",date:"2026-03-07",price:220,brand:"Jordan",color:"Imperial Purple/Multi-Color"},
    {name:"Air Jordan 1 High OG \"Psychic Blue\" (W)",sku:"FD2596-102",date:"2026-03-07",price:185,brand:"Jordan",color:"Pale Ivory/Psychic Blue-Coconut Milk"},
    {name:"Air Jordan 13 \"Chicago\"",sku:"414571-102",date:"2026-03-13",price:215,brand:"Jordan",color:"White/Black-True Red"},
    {name:"Dashawn Jordan x Nike SB Dunk Low",sku:"IB6208-200",date:"2026-03-14",price:140,brand:"Nike",color:"String/Black-Bright Spruce-Purple",collab:true},
    {name:"Air Jordan 1 Low OG \"Floral Swoosh\"",sku:"IF4391-100",date:"2026-03-18",price:165,brand:"Jordan",color:"Sail/Off White-Coconut Milk"},
    {name:"Nike KD 6 \"PBJ\"",sku:"IB6903-800",date:"2026-03-20",price:145,brand:"Nike",color:"Laser Orange/Black-Raspberry Red"},
    {name:"Air Jordan 14 \"University Blue\"",sku:"487471-007",date:"2026-03-21",price:210,brand:"Jordan",color:"Black/University Blue-Metallic Silver-White"},
    {name:"Swarovski x Air Jordan 1 High OG",sku:"HF6248-002",date:"2026-03-21",price:1005,brand:"Jordan",color:"Vast Grey/Vast Grey-Photon Dust",collab:true},
    {name:"Nike Kobe 5 Protro \"Lower Merion Away\"",sku:"IM0557-001",date:"2026-03-23",price:200,brand:"Nike",color:"Metallic Silver/Team Red-White"},
    {name:"Nike Air Foamposite Pro \"UNC\"",sku:"HF0794-400",date:"2026-03-27",price:240,brand:"Nike",color:"University Blue/White-Midnight Navy"},
    {name:"Travis Scott x Jumpman Jack \"Green Spark\"",sku:"IM9113-300",date:"2026-03-27",price:205,brand:"Jordan",color:"Green Spark/Vapor Green-Black",collab:true},
    {name:"Virgil Abloh x Air Jordan 1 \"Alaska\"",sku:"AA3834-100",date:"2026-03-28",price:230,brand:"Jordan",color:"White/White",collab:true},
    {name:"Air Jordan 3 OG \"Spring is in the Air\"",sku:"IF4396-100",date:"2026-03-28",price:210,brand:"Jordan",color:"Sail/Jade Aura-Aura-Iced Carmine"},
    {name:"NOTE Manchester x Nike SB Dunk Low",sku:"IO9508-200",date:"2026-03-28",price:130,brand:"Nike",color:"Flax/Summit White-Sail",collab:true},
    // APRIL 2026
    {name:"Nike Sabrina 3 \"What The\"",sku:"IO7845-300",date:"2026-04-01",price:145,brand:"Nike",color:"Igloo/Blue Crystal-Light Atomic Pink"},
    {name:"Air Jordan 3 \"Orange Citrus\" (W)",sku:"CK9246-101",date:"2026-04-04",price:205,brand:"Jordan",color:"White/Cement Grey-Fire Red-Multi"},
    {name:"Nike Ja 3 \"Jurassic Park\"",sku:"IU7240-001",date:"2026-04-10",price:135,brand:"Nike",color:"Anthracite/Yellow Ochre-Bright Crimson",collab:true},
    {name:"adidas Anthony Edwards 2 \"Lime Burst\"",sku:"JR1572",date:"2026-04-12",price:130,brand:"Adidas",color:"Core Black/Lime Burst"},
    {name:"Air Jordan 1 Low OG \"Banned\"",sku:"IW6276-001",date:"2026-04-11",price:185,brand:"Jordan",color:"Black/Sail-Gum-University Red"},
    {name:"Air Jordan 11 Low \"University Blue\"",sku:"TBD-UNC11",date:"2026-04-18",price:195,brand:"Jordan",color:"White/University Blue"},
    {name:"Air Jordan 3 \"Orange Citrus\" (W)",sku:"CK9246-101b",date:"2026-04-23",price:205,brand:"Jordan",color:"White/Cement Grey-Fire Red-Multi"},
    {name:"Air Jordan 5 \"White Metallic\"",sku:"TBD-WM5",date:"2026-04-25",price:220,brand:"Jordan",color:"White/Metallic Silver"},
    // MAY 2026
    {name:"Air Jordan 4 \"Toro Bravo\"",sku:"FQ8138-600",date:"2026-05-02",price:220,brand:"Jordan",color:"Fire Red/White-Black-Cement Grey"},
    {name:"Air Jordan 11 Low \"Mother's Day\"",sku:"AH7860-102",date:"2026-05-02",price:195,brand:"Jordan",color:"White/Metallic Gold-Team Gold"},
    {name:"Nigel Sylvester x Air Jordan 4",sku:"IQ8055-100",date:"2026-05-09",price:230,brand:"Jordan",color:"Sail/Cinnabar-Black",collab:true},
    {name:"Air Jordan 1 Low OG \"Banned\"",sku:"IW6276-001b",date:"2026-05-16",price:145,brand:"Jordan",color:"Black/Black-Varsity Red-Summit White"},
    {name:"Air Jordan 12 \"Bloodline\"",sku:"CT8013-001",date:"2026-05-23",price:205,brand:"Jordan",color:"Black/Varsity Red"},
    // JUNE 2026
    {name:"Air Jordan 3 OG \"Bin 23\"",sku:"IO7744-600",date:"2026-06-13",price:350,brand:"Jordan",color:"Team Red/Metallic Gold-Burgundy Crush"},
    {name:"Free The Youth x Air Jordan 16",sku:"IV7638-001",date:"2026-06-13",price:250,brand:"Jordan",color:"Metallic Silver/Picante Red-Total Orange",collab:true},
    // JULY 2026
    {name:"Air Jordan 3 OG \"True Blue\"",sku:"IF4396-102",date:"2026-07-03",price:230,brand:"Jordan",color:"White/True Blue"},
    // AUGUST 2026
    {name:"Air Jordan 8 \"Space Jam\"",sku:"HV4794-106",date:"2026-08-08",price:215,brand:"Jordan",color:"Multi",collab:true},
    {name:"Air Jordan 6 \"Oreo\"",sku:"CT8529-108",date:"2026-08-22",price:215,brand:"Jordan",color:"Black/White-Speckled"},
    // SEPTEMBER 2026
    {name:"Air Jordan 8 \"Chrome\"",sku:"TBD-CHR8",date:"2026-09-12",price:215,brand:"Jordan",color:"Chrome/Silver"},
    // OCTOBER 2026
    {name:"Air Jordan 1 High OG \"Royal\"",sku:"TBD-ROY1",date:"2026-10-10",price:185,brand:"Jordan",color:"Black/Royal Blue"},
    {name:"Air Jordan 14 \"Forest Green\"",sku:"TBD-FG14",date:"2026-10-31",price:215,brand:"Jordan",color:"White/Forest Green"},
    // NOVEMBER 2026
    {name:"Air Jordan 4 OG \"Bred\"",sku:"TBD-BRED4",date:"2026-11-27",price:220,brand:"Jordan",color:"Black/Cement Grey-Fire Red"},
    // DECEMBER 2026
    {name:"Air Jordan 11 \"Space Jam\"",sku:"TBD-SJ11",date:"2026-12-20",price:235,brand:"Jordan",color:"Black/Concord-White",collab:true},
    {name:"Air Jordan 6 \"White Infrared\"",sku:"TBD-IR6",date:"2026-12-26",price:215,brand:"Jordan",color:"White/Infrared"},
  ];

  const viewDate = new Date(today.getFullYear(), today.getMonth() + monthOffset, 1);
  const monthName = viewDate.toLocaleString('default', { month: 'long' });
  const year = viewDate.getFullYear();

  const brandOptions = ["ALL","JORDAN","NIKE","ADIDAS","COLLAB"];

  const filteredReleases = useMemo(function() {
    return releases.filter(function(r) {
      if (brandFilter === "ALL") return true;
      if (brandFilter === "COLLAB") return r.collab;
      return r.brand.toUpperCase() === brandFilter;
    });
  }, [brandFilter]);

  const monthReleases = useMemo(function() {
    return filteredReleases.filter(function(r) {
      var d = new Date(r.date + "T00:00:00");
      return d.getMonth() === viewDate.getMonth() && d.getFullYear() === viewDate.getFullYear();
    }).sort(function(a, b) { return new Date(a.date) - new Date(b.date); });
  }, [filteredReleases, monthOffset]);

  function getBrandClass(r) {
    if (r.collab) return "brand-collab";
    switch (r.brand) {
      case "Jordan": return "brand-jordan";
      case "Nike": return "brand-nike";
      case "Adidas": return "brand-adidas";
      case "New Balance": return "brand-nb";
      case "Yeezy": return "brand-yeezy";
      default: return "brand-other";
    }
  }

  // Calendar grid generation
  function getCalendarDays() {
    var firstDay = new Date(viewDate.getFullYear(), viewDate.getMonth(), 1);
    var lastDay = new Date(viewDate.getFullYear(), viewDate.getMonth() + 1, 0);
    var startDow = firstDay.getDay();
    var days = [];
    // Previous month padding
    for (var i = startDow - 1; i >= 0; i--) {
      var d = new Date(firstDay);
      d.setDate(d.getDate() - i - 1);
      days.push({ date: d, otherMonth: true });
    }
    // Current month
    for (var j = 1; j <= lastDay.getDate(); j++) {
      days.push({ date: new Date(viewDate.getFullYear(), viewDate.getMonth(), j), otherMonth: false });
    }
    // Next month padding
    while (days.length % 7 !== 0) {
      var last = days[days.length - 1].date;
      var nd = new Date(last);
      nd.setDate(nd.getDate() + 1);
      days.push({ date: nd, otherMonth: true });
    }
    return days;
  }

  function releasesForDate(date) {
    var ds = date.getFullYear() + "-" + String(date.getMonth() + 1).padStart(2, "0") + "-" + String(date.getDate()).padStart(2, "0");
    return filteredReleases.filter(function(r) { return r.date === ds; });
  }

  function isToday(date) {
    return date.getDate() === today.getDate() && date.getMonth() === today.getMonth() && date.getFullYear() === today.getFullYear();
  }

  function formatDate(dateStr) {
    var d = new Date(dateStr + "T00:00:00");
    return d.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
  }

  // Group list view by date
  var listGrouped = {};
  monthReleases.forEach(function(r) {
    if (!listGrouped[r.date]) listGrouped[r.date] = [];
    listGrouped[r.date].push(r);
  });

  // Stats
  var totalDrops = monthReleases.length;
  var collabCount = monthReleases.filter(function(r) { return r.collab; }).length;
  var avgPrice = totalDrops > 0 ? Math.round(monthReleases.reduce(function(s, r) { return s + r.price; }, 0) / totalDrops) : 0;
  var highestDrop = monthReleases.reduce(function(max, r) { return r.price > (max ? max.price : 0) ? r : max; }, null);

  var calDays = getCalendarDays();
  var dayNames = ["SUN","MON","TUE","WED","THU","FRI","SAT"];

  return (
    <div className="page">
      <div className="section-wrap">
        <div className="section-eyebrow">Upcoming</div>
        <div className="section-title"><span className="filled">RELEASE</span> <span className="outline">CALENDAR</span></div>
        <div className="section-sub">Every confirmed sneaker drop. Updated weekly from Nike SNKRS, Sneaker Bar Detroit, House of Heat, and more.</div>

        <div className="cal-stats">
          <div className="cal-stat">
            <div className="cal-stat-label">Drops This Month</div>
            <div className="cal-stat-val accent">{totalDrops}</div>
          </div>
          <div className="cal-stat">
            <div className="cal-stat-label">Collabs</div>
            <div className="cal-stat-val" style={{color:"#cc44ff"}}>{collabCount}</div>
          </div>
          <div className="cal-stat">
            <div className="cal-stat-label">Avg Retail</div>
            <div className="cal-stat-val green">${avgPrice}</div>
          </div>
          <div className="cal-stat">
            <div className="cal-stat-label">Priciest Drop</div>
            <div className="cal-stat-val" style={{color:"#ffd200"}}>{highestDrop ? "$" + highestDrop.price : "â€”"}</div>
          </div>
        </div>

        <div className="cal-header">
          <div className="cal-month-nav">
            <button onClick={function(){setMonthOffset(monthOffset-1)}}>â—€ PREV</button>
            <div className="cal-month-label"><span>{monthName}</span> {year}</div>
            <button onClick={function(){setMonthOffset(monthOffset+1)}}>NEXT â–¶</button>
          </div>
          <div className="cal-view-toggle">
            <button className={"cal-view-btn" + (view==="calendar"?" active":"")} onClick={function(){setView("calendar")}}>GRID</button>
            <button className={"cal-view-btn" + (view==="list"?" active":"")} onClick={function(){setView("list")}}>LIST</button>
          </div>
        </div>

        <div className="cal-filters">
          {brandOptions.map(function(b) {
            return <button key={b} className={"cal-filter-btn" + (brandFilter===b?" active":"")} onClick={function(){setBrandFilter(b)}}>{b}</button>;
          })}
        </div>

        {view === "calendar" && (
          <div className="cal-grid">
            {dayNames.map(function(d) { return <div key={d} className="cal-day-header">{d}</div>; })}
            {calDays.map(function(day, i) {
              var rels = releasesForDate(day.date);
              var cls = "cal-day" + (day.otherMonth ? " other-month" : "") + (isToday(day.date) ? " today" : "");
              return (
                <div key={i} className={cls}>
                  <div className="cal-day-num">{day.date.getDate()}</div>
                  {rels.slice(0, 3).map(function(r, j) {
                    return <span key={j} className={"cal-release-pip " + getBrandClass(r)} onClick={function(){setSelectedRelease(r)}}>{r.name.split(" ").slice(0,3).join(" ")}</span>;
                  })}
                  {rels.length > 3 && <span className="cal-more" onClick={function(){setView("list")}}>+{rels.length - 3} more</span>}
                </div>
              );
            })}
          </div>
        )}

        {view === "list" && (
          <div className="cal-list">
            {monthReleases.length === 0 && <div style={{textAlign:"center",padding:"60px 0",color:"var(--muted)",fontSize:"0.75rem",letterSpacing:"1px"}}>No releases scheduled for this month</div>}
            {Object.keys(listGrouped).sort().map(function(dateStr) {
              var d = new Date(dateStr + "T00:00:00");
              var dayLabel = d.toLocaleDateString('en-US', { weekday: 'long' });
              var dateLabel = d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
              var isPast = d < new Date(today.getFullYear(), today.getMonth(), today.getDate());
              return (
                <div key={dateStr}>
                  <div className="cal-list-date" style={isPast?{opacity:0.4}:{}}><span>{dateLabel}</span> â€” {dayLabel}</div>
                  {listGrouped[dateStr].map(function(r, j) {
                    return (
                      <div key={j} className="cal-list-item" style={isPast?{opacity:0.5}:{}} onClick={function(){setSelectedRelease(r)}}>
                        <div className="cal-list-img">
                          <ReleaseImage sku={r.sku} name={r.name} />
                        </div>
                        <div className="cal-list-info">
                          <div className="cal-list-name">{r.name}</div>
                          <div className="cal-list-meta">{r.brand} Â· {r.color}</div>
                          <div className="cal-list-sku">{r.sku}</div>
                        </div>
                        <div className="cal-list-price">${r.price}</div>
                        <div className="cal-list-actions">
                          <a className="cal-list-btn primary" href={"/?search=" + encodeURIComponent(r.name)} onClick={function(e){e.stopPropagation()}}>Compare Prices</a>
                        </div>
                      </div>
                    );
                  })}
                </div>
              );
            })}
          </div>
        )}

        <div className="cal-legend">
          <div className="cal-legend-item"><div className="cal-legend-dot" style={{background:"#ff3c00"}}/> JORDAN</div>
          <div className="cal-legend-item"><div className="cal-legend-dot" style={{background:"#888"}}/> NIKE</div>
          <div className="cal-legend-item"><div className="cal-legend-dot" style={{background:"#00e676"}}/> ADIDAS</div>
          <div className="cal-legend-item"><div className="cal-legend-dot" style={{background:"#cc44ff"}}/> COLLAB</div>
        </div>

        {selectedRelease && (
          <div className="cal-modal-overlay" onClick={function(){setSelectedRelease(null)}}>
            <div className="cal-modal" onClick={function(e){e.stopPropagation()}}>
              <div className="cal-modal-head">
                <div style={{fontSize:"0.5rem",letterSpacing:"3px",textTransform:"uppercase",color:"var(--accent)"}}>{selectedRelease.brand}{selectedRelease.collab?" Â· COLLAB":""}</div>
                <button className="cal-modal-close" onClick={function(){setSelectedRelease(null)}}>âœ•</button>
              </div>
              <div className="cal-modal-img">
                <ReleaseImage sku={selectedRelease.sku} name={selectedRelease.name} size={240} />
              </div>
              <div className="cal-modal-body">
                <div className="cal-modal-title">{selectedRelease.name}</div>
                <div className="cal-modal-details">
                  <div className="cal-modal-detail"><label>Release Date</label><span>{formatDate(selectedRelease.date)}</span></div>
                  <div className="cal-modal-detail"><label>Retail Price</label><span style={{color:"var(--green)"}}>${selectedRelease.price}</span></div>
                  <div className="cal-modal-detail"><label>Style Code</label><span style={{fontSize:"0.9rem"}}>{selectedRelease.sku}</span></div>
                  <div className="cal-modal-detail"><label>Colorway</label><span style={{fontSize:"0.7rem",fontFamily:"'DM Mono',monospace"}}>{selectedRelease.color}</span></div>
                </div>
                <div className="cal-modal-btns">
                  <a className="cal-list-btn primary" href={"/?search=" + encodeURIComponent(selectedRelease.name)}>Compare Prices</a>
                  <a className="cal-list-btn" href={"https://www.amazon.com/s?k=" + encodeURIComponent(selectedRelease.name + " " + selectedRelease.sku) + "&tag=sneakyradar-20"} target="_blank" rel="noopener">Amazon</a>
                  <a className="cal-list-btn" href={"https://stockx.com/search?s=" + encodeURIComponent(selectedRelease.name)} target="_blank" rel="noopener">StockX</a>
                </div>
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

function ReleaseImage(props) {
  const { useState, useEffect } = React;
  const [src, setSrc] = useState(null);
  useEffect(function() {
    if (!props.name) return;
    var q = props.name.replace(/ \(W\)/g,"").replace(/"[^"]*"/g,"").trim().split(" ").slice(0,4).join(" ");
    fetch("/.netlify/functions/anthropic", {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({action:"search",query:q,limit:1})
    }).then(function(r){return r.json()}).then(function(j) {
      if (j.data && j.data[0] && j.data[0].image) setSrc(j.data[0].image);
    }).catch(function(){});
  }, [props.name]);
  if (!src) return <span style={{fontSize:"2rem"}}>ðŸ‘Ÿ</span>;
  return <img src={src} alt={props.name} style={{width:props.size||"100%",height:props.size||"100%",objectFit:"contain"}} />;
}

function App() {
  const [activePage, setActivePage] = useState("drops");
  const [showAlertModal, setShowAlertModal] = useState(false);
  const tabs = [{id:"drops",label:"Drop Radar",icon:"ðŸ“¡"},{id:"releases",label:"Releases",icon:"ðŸ“…"},{id:"resell",label:"Resell Tracker",icon:"ðŸ“ˆ"},{id:"auth",label:"Auth Guide",icon:"ðŸ”"}];
  return (
    <>
      {showAlertModal&&<AlertModal onClose={()=>setShowAlertModal(false)}/>}
      <nav className="nav">
        <div className="nav-left">
          <div className="nav-logo"><span className="sneaky">SNEAKY</span><span className="radar">RADAR</span></div>
          <div className="nav-tabs">
            {tabs.map(t=>(
              <button key={t.id} className={`nav-tab ${activePage===t.id?"active":""}`} onClick={()=>setActivePage(t.id)}>
                <span>{t.icon}</span>{t.label}
              </button>
            ))}
          </div>
        </div>
        <div className="nav-right">
          <button className="alert-btn" onClick={()=>setShowAlertModal(true)}>
            <span className="alert-dot"/> Drop Alerts
          </button>
        </div>
      </nav>
      {activePage==="drops"&&<DropRadarPage/>}
      {activePage==="releases"&&<ReleasesPage/>}
      {activePage==="resell"&&<ResellPage/>}
      {activePage==="auth"&&<AuthPage/>}
      <footer className="site-footer">
        <div className="footer-logo"><span>SNEAKY</span><span className="radar">RADAR</span></div>
        <div>Prices subject to change. Links may be affiliate links. Not affiliated with any retailer.</div>
      </footer>
      <ChatWidget/>
    </>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>
